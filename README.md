# AI Finance Telegram Mini App

## Overview

Telegram Mini App для голосового финансового учёта и аналитики.
Пользователь диктует расходы → система распознаёт речь → извлекает
структуру → сохраняет в БД → формирует аналитику и отчёты. Сервер
размещается на Raspberry Pi и работает 24/7.

------------------------------------------------------------------------

## Общая архитектура

Telegram Client → Telegram Mini App (React) → Backend API (FastAPI) →
PostgreSQL → OpenClaw API (STT + LLM)

------------------------------------------------------------------------

## Авторизация

-   Используется Telegram WebApp initData
-   Backend валидирует подпись Telegram
-   Пользователь идентифицируется по telegram_id
-   Без логинов и паролей

------------------------------------------------------------------------

## Голосовой поток

1.  Пользователь записывает голос в Mini App
2.  Аудио отправляется на Backend
3.  Backend → OpenClaw Speech-to-Text
4.  Полученный текст → OpenClaw LLM (парсинг JSON)
5.  JSON валидируется
6.  Данные сохраняются в PostgreSQL
7.  UI обновляется

------------------------------------------------------------------------

## Формат ответа LLM

{ "type": "expense", "amount": 1200, "currency": "RUB", "category":
"food", "description": "Продукты", "date": "2026-02-25" }

Требования: - temperature = 0 - строго JSON - обязательная серверная
валидация

------------------------------------------------------------------------

## Структура базы данных

### users

-   id
-   telegram_id
-   created_at

### transactions

-   id
-   user_id
-   type (income / expense)
-   amount
-   currency
-   category
-   description
-   transaction_date
-   created_at

### budgets

-   id
-   user_id
-   category
-   monthly_limit

### goals

-   id
-   user_id
-   goal_name
-   target_amount
-   current_amount
-   deadline

------------------------------------------------------------------------

## Функциональность

### MVP

-   Авторизация через Telegram
-   Добавление операции (ручной ввод)
-   Голосовой ввод
-   Просмотр списка операций
-   Месячный отчёт

### Расширение

-   Бюджеты по категориям
-   Финансовые цели
-   Предупреждения о перерасходе
-   Графики и аналитика
-   Прогноз накоплений

------------------------------------------------------------------------

## Месячный отчёт

Генерируется автоматически 1-го числа: - Общий доход - Общий расход -
Сбережения - Расходы по категориям - Отклонение от бюджета

Отправляется через Telegram Bot API и доступен в Mini App.

------------------------------------------------------------------------

## Безопасность

-   HTTPS (Let's Encrypt)
-   Валидация Telegram initData
-   Закрытая БД (локальный доступ)
-   Переменные окружения (.env)
-   Ограничение размера аудио
-   Логирование и обработка ошибок

------------------------------------------------------------------------

## Развёртывание

-   Raspberry Pi
-   Docker + docker-compose
-   Nginx reverse proxy
-   PostgreSQL контейнер
-   Backend контейнер
-   Frontend контейнер

------------------------------------------------------------------------

## Дорожная карта разработки

### Этап 1 --- Backend Core

-   Авторизация
-   Модель БД
-   Добавление транзакции
-   Получение отчёта

### Этап 2 --- Mini App UI

-   Dashboard
-   Добавление операции
-   История транзакций

### Этап 3 --- Голос

-   STT
-   LLM JSON parsing
-   Валидация

### Этап 4 --- Аналитика

-   Графики
-   Бюджеты
-   Цели
